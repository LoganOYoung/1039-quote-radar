# 价格计算器规划：可实现 vs 信息差 vs 实时数据 vs 使用复杂度

围绕「箱规、毛净重、实重/体积重、单位重量体积价、国内运费、FOB 到目的港、目的国/港口选择」做分类与实现建议。

---

## 一、可实现（公式 + 用户输入/配置即可）

| 能力 | 说明 | 实现方式 |
|------|------|----------|
| **箱规 → 体积、体积重** | 长×宽×高 → CBM；体积重 = L×W×H / 系数（如 6000 空运、5000 海运，可配置） | 前端公式计算，系数在后台或环境变量可配 |
| **毛重 / 净重** | 用户输入毛重、净重（kg） | 表单字段，用于展示和与体积重对比 |
| **重货 / 抛货 判断** | 实重 vs 体积重，取大者为计费重；并提示「按重计费」或「按体积计费」 | `计费重 = max(实重, 体积重)`，逻辑固定 |
| **单位重量/体积价格（用户自填）** | 国内段「按元/吨」或「元/CBM」或「元/柜」用户选+填单价 | 下拉：按重/按体积/按柜 + 单价输入，公式内按计费重或体积换算 |
| **国内运费（估算）** | 义乌→宁波港等，按「元/吨」或「元/CBM」× 计费重/体积 | 用户选单位、填单价；或提供默认值（如 120 拖车+按量），可覆盖 |
| **FOB 价（到装运港）** | 现有逻辑扩展：EXW + 国内运费 + 代理/拖车 + 利润，再÷汇率 | 在现有 `calcFobUsd` 上扩展，国内运费由上面算出或用户填 |
| **目的国/港口选择（仅列表）** | 常用目的港下拉（宁波/上海/深圳→ 鹿特丹/洛杉矶/迪拜等） | 静态列表或简单 JSON，**不包含到该港的运费**，仅用于展示/筛选 |

以上都可以在不接外部 API、不依赖货代实时数据的前提下，用「公式 + 用户输入 + 少量配置」做完，适合作为「价格计算器」第一版。

---

## 二、有信息差、AI/系统无法自动知道的

| 能力 | 说明 | 建议 |
|------|------|------|
| **行业规矩：按重 vs 按体积** | 不同品类、不同线路，有的按重、有的按体积、有的按柜；规则因行业/货代而异 | 不做自动判断；由用户**选择**「按重 / 按体积 / 按柜」，或提供「常用品类预设」让用户选（预设需人工维护） |
| **计费系数 6000 / 5000 / 其他** | 空运常见 6000，海运/快递有 5000 等，不同货代不同 | 做成**可配置**（后台或环境变量），或表单里让用户选「空运系数 / 海运系数」 |
| **单位重量/体积的「合理价格」** | 某品类国内段「元/吨」合理区间、目的港杂费习惯等 | 不自动填；可做「参考区间」文案（如「义乌→宁波普柜约 xxx 元/柜」），注明仅供参考、以货代为准 |
| **目的港杂费、清关习惯** | 各港 THC、清关费、代理费差异大 | 不自动算；可列「常见目的港备注」说明需向货代确认，或留「目的港费用」为用户手动填写项 |

这类适合用「用户选择 + 提示文案」解决，避免系统假装知道行业细节。

---

## 三、需要很复杂/实时数据（通常需用户问货代）

| 能力 | 说明 | 实现建议 |
|------|------|----------|
| **到目的港的海运/空运运费** | 不同目的港、柜型、船期、淡旺季价格波动大 | **不接实时 API**（对接成本高、数据源少）。改为：用户向货代询价后，在计算器里**手动输入「到港运费」或「CIF/CFR 总价」**，系统只做「FOB + 用户填的运费 → 到港价」或展示对比 |
| **燃油附加费、旺季附加费** | 随市场变 | 同上，合在用户输入的「单吨/单方/单柜」价格里，或单列「附加费」用户自填 |
| **具体船期、柜型、限重** | 各船公司、各线不同 | 不做自动拉取；可做「常见柜型」说明（如 20GP/40GP 体积、限重），帮助用户自己对照货代报价 |
| **目的港 THC、清关、代理费** | 各港、各货代报价不同 | 不自动算；可选「目的港费用」为**用户输入项**，或留备注「请以货代报价为准」 |

结论：**海运费、目的港费用**等以「用户询价后手动输入」为主，系统只做「公式 + 用户填的数」的汇总与展示，不做实时拉价。

---

## 四、会让义乌贸易商用起来更复杂的点

| 问题 | 说明 | 建议 |
|------|------|------|
| **表单字段暴增** | 箱规、毛净重、体积重、计费重、国内单价、海运费、目的港… 一屏填不完 | **分步/折叠**：第一步「产品+EXW+箱规重量」→ 自动算体积重/计费重；第二步「国内段/利润」→ 得 FOB；第三步（可选）「目的港+到港运费」→ 得 CIF/到港价。默认只展开第一步，高级再展开 |
| **单位多容易填错** | CBM、KG、柜、USD、CNY、元/吨、元/CBM 混在一起 | 单位固定或下拉选好，旁边用灰色小字提示「单位：kg」「单位：元/吨」；关键结果（FOB USD、计费重）大号突出 |
| **用户既要算又要问货代** | 若海运费、目的港费都要用户自己问再填，会感觉「还不如直接问货代总价」 | 定位清晰：**计算器 = 把「国内段 + FOB」算准**；国际段做「可选」：用户填货代给的运费/总价，系统只做汇总和展示。文案写清「国内成本与 FOB 由本工具计算；国际运费请以货代报价为准」 |
| **行业差异大** | 有的品类按柜、有的按重、有的按方，统一表单难 | 不做「全自动判断」；用**场景/模式**：如「简单报价（当前）」「带箱规与国内运费」「带目的港（用户填运费）」；或按「按重 / 按体积 / 按柜」切换，隐藏无关字段 |
| **默认值/预设** | 拖车 120、代理 80 等，不同人不同 | 保留可配置（后台或 env），必要时「高级设置」里允许单次覆盖，避免改代码 |

目标：**不加必要复杂度**。先上「箱规→体积重、重/抛、国内段→FOB」；目的港与海运以「用户输入 + 展示」为主，不追求全自动。

---

## 五、推荐实现顺序（与是否「复杂」对齐）

1. **Phase A（不增加使用复杂度）**  
   - 箱规（长宽高）→ 体积 CBM、体积重。  
   - 毛重/净重输入 → 计费重 = max(实重, 体积重)，并提示重货/抛货。  
   - 国内运费：用户选「按重/按体积/按柜」+ 填单价，系统算出一段国内成本；并入现有 FOB 公式（EXW + 国内段 + 代理拖车 + 利润）→ FOB USD。  
   - 计费系数（6000/5000）可配置或用户选。

2. **Phase B（可选，仍以用户输入为主）**  
   - 目的国/港口下拉（仅列表，无运费数据）。  
   - 「到目的港运费」为用户输入项 → 系统算 FOB + 运费 = 到港价（或 CIF 展示）。  
   - 文案明确：国际段以货代报价为准。

3. **不做 / 延后**  
   - 自动拉取海运/空运实时运价。  
   - AI 自动判断「按重/按体积」行业规矩。  
   - 自动对接货代系统获取报价。

这样划分后：**可实现**的用公式+配置+用户输入完成；**信息差**用选择和提示解决；**实时数据**交给用户问货代后手动填；**使用复杂度**用分步、场景和可选高级项控制，义乌贸易商仍能「简单用就够用，要细算再展开」。
